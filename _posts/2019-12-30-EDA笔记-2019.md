---
layout:     post   				    # 使用的布局（不需要改）
title:      Windows10下Libero Soc License的获取和使用			# 标题 
subtitle:    #副标题
date:       2019-10-25 				# 时间
author:     HZH 						# 作者
header-img:  	#这篇文章标题背景图片
catalog: true 						# 是否归档
tags:								#标签
- 教程
---

# EDA

## 三种风格

### 门级风格

![1575271897486](C:\Users\x\AppData\Roaming\Typora\typora-user-images\1575271897486.png)

![1575271859241](C:\Users\x\AppData\Roaming\Typora\typora-user-images\1575271859241.png)



### 数据流风格

- 最基本的机制：使用**连续赋值语句**

- 右边表达式的操作数**无论何时发生变化**，表达式都**重新计算**，计算结果被赋予左边表达式的线网类型变量。

![1575272054145](C:\Users\x\AppData\Roaming\Typora\typora-user-images\1575272054145.png)

*当a, b, sel 有变换时，out将同时变化* 



### 行为风格

- 使用initial语句（只执行一次）和always语句（重复执行）
- 所有的initial和always语句**在0时刻开始并行执行**

![1575272163599](C:\Users\x\AppData\Roaming\Typora\typora-user-images\1575272163599.png)



## 编译器指令

- ``timescale`

![1575272449674](C:\Users\x\AppData\Roaming\Typora\typora-user-images\1575272449674.png)



## 数据类型、操作符和表达式

### 基本操作符

- 任意操作数是X或Z，则结果为X。如“ 'b110x + 'b111”结果为'bxxxx
- 算术操作结果的位宽由**最大操作数的位宽**决定
- 结果的长度由操作符**左端**目标长度决定
- **有符号数**：整型变量、十进制形式整数、有符号线网、有符号reg、有符号s（S）标记的整数
- **无符号数**：**线网、reg**、没有s（S）标记的整数



- `2**4`：2的4次幂
- `^`：按位异或。有`x`或`z`结果为`x`，有偶数个1结果为0，否则为1
- 逻辑右移补0，算术右移补符号位
- `{}`：连接，`{1'b1, 1'b0}` = `2'b10`
- `{{}}`：复制，`{3{1’b1}}`=`3'b111`



### 任务与函数

- 相同：$ < keyword >

- 区别：

  ![1577622357940](C:\Users\x\AppData\Roaming\Typora\typora-user-images\1577622357940.png)
  
- `$display`任务：输出

  - ```verilog
    $display("time=%t , a=%b , b=%b , Cin=%b , Sum=%b, Cout=%b" , $time , pa , pb , pCin , Sum , Cout);
    ```

- `$monitor`任务：对信号值变化进行动态监视

- `$stop`任务：挂起仿真

- `$finish`任务：结束仿真

- 时间函数

  - `$time`
  - `$stime`
  - `$realtime`

- `$random[%b]`函数：产生一个范围在**(-b + 1)到(b - 1)**间的随机数



### `timescale

- 定义**延迟的单位和精度**
- ``timescale 1ns/100ps`：延迟单位为1ns，延迟精度为1/10ns（100ps）

### 四种基本的值

- 0：逻辑0或“假”

- 1：逻辑1或“真”

- x（X）：**未知**状态，x对大小写不敏感

- z（Z）：**高阻**状态，z对大小写不敏感 



### 三类常量

- 整型（Integer）

- 实数型（Real）

- 字符串型（String） 

**下划线 `_` 可以随意用在整数或实数中**，提高易读性，但不能用作首字符



### 指定位宽的基数格式

- **格式** ：`[位宽]  '[符号]  基数  value`

- 基数o或O表示八进制，b或B表示二进制，d或D表示十进制，h或H表示十六进制 

- 问号`?`可以代替值z



### 数据类型

#### 线网

- 体现了结构**实体**（如门级元件）之间的物理连接关系 

- 值由其连接器件的输出端连续驱动，缺省值为z（高阻）

- 默认的线网位宽为1



#### 寄存器(reg)

- 对应具有**状态保持**作用的硬件电路，如触发器、锁存器等 

- 声明形式：**reg [最高位编号:最低位编号]** reg1,reg2,...regN; 

- 变量名全部用小写字母 

- 变量可以取任意长度，变量中的值通常被解释为无符号数 



#### 整型（Integer）

- **默认32位** 



#### 数组

**数组**

- 数组的元素可以是标量或者向量（也有称矢量）
- ![1575273420276](C:\Users\x\AppData\Roaming\Typora\typora-user-images\1575273420276.png) 

- 可用不同类型数组元素来定义数组 
- ![1575273428322](C:\Users\x\AppData\Roaming\Typora\typora-user-images\1575273428322.png)

- 左边表示元素**位数**，右边表示元素**个数**



#### 存储器

- ![1575273641483](C:\Users\x\AppData\Roaming\Typora\typora-user-images\1575273641483.png)
- ![1575273654571](C:\Users\x\AppData\Roaming\Typora\typora-user-images\1575273654571.png)



### 操作数

#### 位选和部分位选

![1575273761664](C:\Users\x\AppData\Roaming\Typora\typora-user-images\1575273761664.png)

- 存储器和数组元素![1575273826605](C:\Users\x\AppData\Roaming\Typora\typora-user-images\1575273826605.png)



### 表达式

![1577523152069](C:\Users\x\AppData\Roaming\Typora\typora-user-images\1577523152069.png)

最大位宽为32位

#### 计算

1. 确定位宽（一般为最大操作数的位宽）
2. 确定符号
3. 将操作数的符号类型强制转换成表达式的符号类型
4. 扩展操作数的位宽



### 延迟

![1575287633938](C:\Users\x\AppData\Roaming\Typora\typora-user-images\1575287633938.png)



### 事件控制

![1575287699744](C:\Users\x\AppData\Roaming\Typora\typora-user-images\1575287699744.png)

![1577621060976](C:\Users\x\AppData\Roaming\Typora\typora-user-images\1577621060976.png)

![1577621085355](C:\Users\x\AppData\Roaming\Typora\typora-user-images\1577621085355.png)

![1577621113204](C:\Users\x\AppData\Roaming\Typora\typora-user-images\1577621113204.png)





### 过程性赋值

- 非阻塞性过程赋值：**不会阻塞下一条语句的执行**

  ![1575288091656](C:\Users\x\AppData\Roaming\Typora\typora-user-images\1575288091656.png)



### 循环控制语句

- `forever`：无限循环
- `repeat(循环次数)`



## 仿真

验证设计，排除错误



### 功能仿真

- 对HDL、原理图描述或其它描述形式的逻辑功能进行测试模拟，不涉及具体的硬件特性，编译（或综合）后即可进入
- 优点：设计耗时短



### 时序仿真

- 接近真实运行特性的仿真，仿真精度高



## 结构级建模

- 多输入门：`<类型> [实例名] (输出1...输出n, 输入端口)`

- `half_adder(DataA, DataB, s1, c1)` ：按位置顺序进行对应关联
- `half_adder(.A(s1), .B(Cin), .S(Sum), .C(c2));`：使用端口名进行关联

### 基本逻辑门电路

```verilog
module gates(a, b, y1, y2, y3, y4, y5);
	input a, b;
	output y1, y2, y3, y4, y5;
	
	assign y1 = a & b;//与
	assign y2 = a | b;//或
	assign y3 = a ^ b;//异或
	assign y4 = ~(a & b);//与非
	assign y5 = ~(a | b);//或非
endmodule
```





```
case(变量)
	case1:语句1;
	...
	default:语句
endcase
```





## 有限状态机（FSM）

1. 寄存器数目有限
2. 状态有限



### 状态编码

1. 顺序二进制编码
2. 格雷码：转换时只有一位发生变化
3. 独热码：只有一位“1”，“N”状态需要N个触发器



### 状态机

- 摩尔型（Moore）
  - **输入与输出隔离**，消除竞争冒险
- 米勒型（Mealy）
  - 输出与**当前状态和输入**都有关



#### 结构

- 状态译码
- 状态寄存器
- 输出译码



#### 进程设计

- 单always

  - 优点：不易产生毛刺
  - 缺点：代码可读性差，消耗较大的芯片资源，无法实现米勒型状态机

- 双always

  - 优点：面积和时间
  - 缺点：产生毛刺，输出延迟

- 三always

  - 可读性强

  - 占用芯片面积适中，无毛刺，有利于综合

  - ```verilog
    always @(posedge clk or negedge rst)
    	if (!rst)
    		current_state <= s0;
    	else
    		current_state <= next_state;//时序状态转换
    		
    always @(current_state or ina)//组合逻辑判断
    	begin
    		case(current_state)
    			s0:begin
    				if(ina == 1)
    					next_state <= s1;
    				else
                    	next_state <= s0;
                    end
                s1:
                //...
                default:next_state <= s0;//能自启动
            endcase
        end
    
    always @(current_state)              //摩尔型
        dataout = (current_state == s3);
      
    				
    ```

    